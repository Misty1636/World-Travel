(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-320b8552"],{ac6a:function(t,a,s){for(var e=s("cadf"),i=s("0d58"),c=s("2aba"),o=s("7726"),r=s("32e9"),n=s("84f2"),l=s("2b4c"),d=l("iterator"),u=l("toStringTag"),p=n.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},C=i(m),h=0;h<C.length;h++){var f,v=C[h],_=m[v],g=o[v],b=g&&g.prototype;if(b&&(b[d]||r(b,d,p),b[u]||r(b,u,v),n[v]=p,_))for(f in e)b[f]||c(b,f,e[f],!0)}},aee3:function(t,a,s){"use strict";var e=s("d28d"),i=s.n(e);i.a},c7a3:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}},[e("template",{slot:"default"},[e("img",{attrs:{src:s("2dbe")}})])],2),e("div",{staticClass:"pt-8 container customerCart"},[t.cart.total?e("h1",{staticClass:"text-center customerCart-title mb-5 text-secondary"},[t._v("您的購物車")]):t._e(),t.cart.total?t._e():e("h5",{staticClass:"text-center py-5 mt-3 mb-5 nonecart"},[t._v("目前您的購物車沒有任何行程!")]),t.cart.total?t._e():e("hr"),t.cart.total?t._e():e("h3",{staticClass:"cart-recommend mb-4 pl-2"},[t._v("為您推薦!")]),t.cart.total?t._e():e("productSlide",{on:{sildeAddtoCart:t.addtoCart}}),t.cart.total?e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-7"},[e("ul",{staticClass:"list-unstyled customerCart-list"},t._l(t.cart.carts,function(a){return e("li",{key:a.id,staticClass:"p-3 mb-3"},[e("div",{staticClass:"d-flex flex-column flex-sm-row"},[e("div",{staticClass:"customerCart-img mr-sm-3 mb-sm-0 mb-3"},[e("img",{staticClass:"img-fluid",attrs:{src:a.product.imageUrl}})]),e("div",{staticClass:"d-flex align-items-center"},[e("div",[e("h4",{staticClass:"customerCart-list-title mb-3"},[t._v(t._s(a.product.title))]),e("div",{staticClass:"customerCart-list-info d-flex"},[e("span",{staticClass:"price mr-3"},[t._v(t._s(t._f("currency")(a.product.price)))]),e("span",{staticClass:"mr-2"},[t._v("x")]),e("span",[t._v(t._s(a.qty)+" "+t._s(a.product.unit))])])])]),e("div",{staticClass:"ml-auto align-self-center"},[e("button",{staticClass:"delete-cartlist",class:{disabled:a.id===t.cartdisable},attrs:{type:"button"},on:{click:function(s){return t.deleteCart(a.id)}}},[a.id!==t.cartItem?e("span",[t._v("刪除")]):e("font-awesome-icon",{attrs:{icon:"spinner",spin:""}})],1)])])])}),0)]),e("div",{staticClass:"col-lg-5"},[e("div",{staticClass:"customerCart-order mb-4"},[e("div",{staticClass:"p-3"},[e("h2",[t._v("訂單金額")]),e("hr",{staticClass:"mb-0"}),e("div",[t._l(t.cart.carts,function(a){return e("div",{key:a.id,staticClass:"d-flex customerCart-order-item align-items-start"},[e("div",{staticClass:"d-flex flex-column"},[e("h5",{staticClass:"mb-0"},[t._v(t._s(a.product.title))]),e("span",[t._v(t._s(a.qty)+" "+t._s(a.product.unit))])]),e("span",{staticClass:"ml-auto order-item-price"},[t._v(t._s(t._f("currency")(a.total)))])])}),t.cart.final_total&&t.cart.final_total!==t.cart.total?e("div",{staticClass:"d-flex customerCart-order-item align-items-start text-success"},[e("div",{staticClass:"d-flex flex-column"},[e("h5",{staticClass:"mb-0"},[t._v("已套用優惠")]),e("span",[t._v(t._s(t.cart.final_total/t.cart.total*100)+"% OFF")])]),e("span",{staticClass:"ml-auto order-item-price"},[t._v("-"+t._s(t._f("currency")(t.cart.total-t.cart.final_total)))])]):t._e(),t._m(0),t._m(1),e("hr",{staticClass:"mt-0"}),e("div",{staticClass:"input-group input-group-sm"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("套用優惠碼")])])])],2)]),e("div",{staticClass:"p-3 customerCart-order-Nextstep"},[e("div",{staticClass:"d-flex justify-content-end mb-3 align-items-end"},[e("span",{staticClass:"subtotal mr-2"},[t._v("總計")]),e("span",{staticClass:"total"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]),e("button",{attrs:{type:"button"},on:{click:t.toCreateOrder}},[t._v("下一步")])])])])]):t._e()],1)],1)},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"d-flex customerCart-order-item align-items-start"},[s("div",{staticClass:"d-flex flex-column"},[s("h5",{staticClass:"mb-0"},[t._v("簽證費")])]),s("span",{staticClass:"ml-auto order-item-price"},[t._v("免簽證")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"d-flex customerCart-order-item border-0 align-items-start"},[s("div",{staticClass:"d-flex flex-column"},[s("h5",{staticClass:"mb-0"},[t._v("機場稅、燃油費")])]),s("span",{staticClass:"ml-auto order-item-price"},[t._v("已內含")])])}],c=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"swiper"},[s("swiper",{attrs:{options:t.swiperOption}},[t._l(t.products,function(a){return s("swiper-slide",{key:a.id},[s("div",{staticClass:"px-2"},[s("div",{staticClass:"list-box"},[s("div",{staticClass:"list-img"},[s("img",{staticClass:"img-fluid",attrs:{src:a.imageUrl,alt:""}}),s("div",{staticClass:"list-more p-3 d-flex justify-content-center align-items-center"},[s("a",{attrs:{href:"#/ProductsDetails/"+a.id},on:{click:function(s){return s.preventDefault(),t.ToProductsDetaill(a.id)}}},[t._v("More")]),s("button",{staticClass:"list-btn",attrs:{type:"button"},on:{click:function(s){return t.getCurrentProduct(a.id)}}},[t._v("我要報名")])])]),s("div",{staticClass:"list-content p-3"},[s("h4",{staticClass:"mb-3"},[t._v(t._s(a.title))]),s("p",{staticClass:"text-secondary"},[t._v(t._s(a.description))]),s("div",{staticClass:"list-price d-flex justify-content-between align-items-center"},[s("span",{staticClass:"oldprice text-secondary"},[t._v(t._s(t._f("currency")(a.origin_price)))]),s("span",{staticClass:"newprice"},[t._v(t._s(t._f("currency")(a.price)))])])])])])])}),s("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2),s("ProductModal",{attrs:{theProduct:t.temproduct,loadingtoCart:t.loadingtoCart},on:{addtheCart:t.addtoCart}})],1)},o=[],r=(s("ac6a"),s("dfa4"),s("7212")),n=s("f0f0"),l={name:"slide",data:function(){return{swiperOption:{slidesPerView:2,spaceBetween:14,autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:1,spaceBetween:30}}},products:[],temproduct:{},cart:{},loadingtoCart:""}},components:{swiper:r["swiper"],swiperSlide:r["swiperSlide"],ProductModal:n["a"]},methods:{getProducts:function(){var t=this,a=[],s="".concat("https://vue-course-api.hexschool.io","/api/").concat("palette","/products/all");t.getCart(),this.$http.get(s).then(function(s){a=s.data.products,a.forEach(function(s,e){if(e<8){var i=Math.floor(Math.random()*a.length);t.products.push(a.splice(i,1)[0])}})})},getCurrentProduct:function(t){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("palette","/product/").concat(t),s=this;this.$http.get(a).then(function(t){$("#productModal").modal("show"),s.temproduct=t.data.product})},ToProductsDetaill:function(t){this.$router.push("/ProductsDetails/".concat(t))},getCart:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("palette","/cart"),a=this;this.$http.get(t).then(function(t){a.cart=t.data.data})},addtoCart:function(t){var a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("palette","/cart"),i=this;i.loadingtoCart=t,this.$http.post(e).then(function(){$("#productModal").modal("hide"),i.loadingtoCart=""}),setTimeout(function(){a.$emit("sildeAddtoCart",t,s)},500)}},mounted:function(){this.getProducts()}},d=l,u=(s("aee3"),s("2877")),p=Object(u["a"])(d,c,o,!1,null,null,null),m=p.exports,C={name:"customerCart",data:function(){return{cart:{},cartItem:"",cartdisable:"",coupon_code:"",isLoading:!1}},methods:{getCart:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("palette","/cart"),a=this;this.$http.get(t).then(function(t){a.cart=t.data.data})},addtoCart:function(t){var a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("palette","/cart"),i=this;i.isLoading=!0;var c={product_id:t,qty:s};this.$http.post(e,{data:c}).then(function(){i.isLoading=!1,$("#productModal").modal("hide"),i.$bus.$emit("message:push","此行程已加入購物車","success"),i.$bus.$emit("pushCart"),a.getCart()})},deleteCart:function(t){var a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("palette","/cart/").concat(t);a.disables=!0,a.cartItem=t,a.cartdisable=t,a.isLoading=!0,this.$http.delete(s).then(function(t){a.isLoading=!1,a.cartItem="",t.data.success&&(a.getCart(),a.$bus.$emit("message:push","成功刪除此行程","success"),a.$bus.$emit("pushCart"))})},addCouponCode:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("palette","/coupon"),s={code:t.coupon_code};t.isLoading=!0,this.$http.post(a,{data:s}).then(function(a){t.isLoading=!1,a.data.success?(t.$bus.$emit("message:push","已套用優惠券","success"),t.getCart(),t.coupon_code=""):(t.$bus.$emit("message:push",a.data.message,"danger"),t.coupon_code="")})},toCreateOrder:function(){this.$router.push("/CreateOrder")}},components:{productSlide:m},created:function(){this.getCart()}},h=C,f=Object(u["a"])(h,e,i,!1,null,null,null);a["default"]=f.exports},d28d:function(t,a,s){}}]);
//# sourceMappingURL=chunk-320b8552.8f880a8e.js.map